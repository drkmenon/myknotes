{
  "hash": "1ff32efbcbc04b13f8e6708a10d244aa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Income distribution\"\ndate: today\ndraft: false\ncategories:\n   - Monte Carlo simulation\n   - economics\ncode-fold: show\nexecute: \n  echo: true\n  warning: false\n---\n\n\n\n\nA BBC report dated 16^th^ January 2023 presents an interesting statistics. It quotes an OXFAM report, stating that 40% wealth is in the hands of top 1%.\n\nThis can be taken as 40:1 Pareto index.\n\n![Income distribution as seen by Pareto](images/clipboard-1360920300.png){#fig-path}\n\n## What is Pareto index?\n\nItalian polymath Vilfredo Pareto observed that approximately 80% of Italy's land was owned by 20% of the population. It is surprisingly self similar over a wide range of magnitudes. That means, 20% of the 20% of total population own 80% of 80% of total land and goes on.\n\n::: callout\n## Income distribution is not normal\n\nHence the outcomes completely differ from¬†Normal or Gaussian distribution.\n:::\n\nThis is a simplification of a general rule. The ratio or index can be any where and need not add up to 100.\n\n## Parameters of Pareto distribution\n\nThe Pareto distribution can be described with only 2 simple parameters, ‚ç∫ and xm.\n\n## Calculating the ùõÇ {#sec-cal}\n\nIf the Pareto ratio is x:y,\n\n$$ùõº = log(x+y)/log(x)$$\n\n::: {.column-margin}\n\nExact formula is log~x~(x+y)\n\n:::\n\nHere, $$ùõº=log(41)/log(40)$$\n\n‚ç∫ = 1.0067\n\nSmaller the ‚ç∫, the larger the proportion of very high-income people and vice verse. Here we can that the index is very low, close to 1.\n\n## xm\n\nIt is the minimum value of the parameter under study.\n\n## Case Scenario\n\nAssume that a marginal individual works for 308 days a year with a minimum wage of ‚Çπ105. Her yearly income will be around ‚Çπ32400. This can be taken as the minimum value of x, the income distribution we are studying. Let's call it *xm.*\n\nWhat will be the mean and median income of the community in which she is living? What will be the maximum income possible? Let's calculate\n\n## Monte Carlo simulation of income distribution\n\nMonte Carlo Simulation can be defined as a computational method of repeated random sampling to obtain numerical results. It can be done using `excel` with or without add-ons for simulation. Excel does not natively support Pareto sampling. Free Open Sourse add-ons like `XLRisk` also (right now) does not support the same. `r` is excellent tool in this situation and also for Monte Carlo simulation of returns for volatile instruments using `levi stable distribution`\n\n## r for simulating income distribution\n\nFirst, install the necessary package VGAM if you haven't already and load.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(VGAM)\n```\n:::\n\n\n\n\nChoose the parameters for the Pareto distribution. We have already calculated the ‚ç∫ and xm. See [@sec-cal]\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nalpha <- 1.0067\nxm <- 32400\n```\n:::\n\n\n\n\nUse the **`rpareto`** function to generate random samples. Let's simulate the wealth of 1000 individuals.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <- 10000  # Number of individuals\nincome_samples <- rpareto(n, scale = xm, shape = alpha)\n```\n:::\n\n\n\n\nTo perform a Monte Carlo simulation, we will repeat the random sampling multiple times and analyze the results. Let's say we want to perform 10000 simulations.\n\n## The simulation[^1]\n\n[^1]:\n    ## Explanation of the code\n\n    -   **`NA`**: This specifies the value that will fill the matrix. In this case, **`NA`** indicates that each element of the matrix will be initialized as a missing value.\n\n    -   **`nrow = num_simulations`**: This argument specifies the number of rows in the matrix. Here, **`num_simulations`** is the number of simulations we want to run, so the matrix will have **`num_simulations`** rows.\n\n    -   **`ncol = n`**: This argument specifies the number of columns in the matrix. In our code, **`n`** is the number of individuals we want to simulate wealth for, so the matrix will have **`n`** columns.\n\n    -   **`for (i in 1:num_simulations)`**: This loop iterates **`num_simulations`** times, where **`i`** takes on the values from 1 to **`num_simulations`**.\n\n    -   **`simulation_results[i, ] <- rpareto(n, scale = xm, shape = alpha)`**: In each iteration of the loop, you're generating a set of random wealth values for **`n`** individuals using the Pareto distribution specified by the parameters **`scale = xm`** and **`shape = alpha`**.\n\n    -   **`rpareto(n, scale = xm, shape = alpha)`**: This function generates **`n`** random numbers from a Pareto distribution with scale **`xm`** and shape **`alpha`**.\n\n    -   **`simulation_results[i, ] <- ...`**: This assigns the generated random wealth values to the **`i`**-th row of the **`simulation_results`** matrix. Each row of **`simulation_results`** represents the wealth distribution for one simulation iteration.\n\n    ```{}\n    ```\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnum_simulations <- 10000\nsimulation_results <- matrix(NA, nrow = num_simulations, ncol = n)\n\nfor (i in 1:num_simulations) {\n  simulation_results[i, ] <- rpareto(n, scale = xm, shape = alpha)\n}\n\n# Summarize the results\nmean_income <- apply(simulation_results, 1, mean)\nmedian_income <- apply(simulation_results, 1, median)\nsd_income <- apply(simulation_results, 1, sd)\n```\n:::\n\n\n\n\n## Visualisation of mean income\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Histogram of mean income from simulations\nhist(mean_income, breaks = 125, main = \"Histogram of Mean income from Monte Carlo Simulations\", xlab = \"Mean income\")\n```\n\n::: {.cell-output-display}\n![](montecarlo_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Summary statistics\nsummary(mean_income)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n   210536    297412    346174    564802    441032 224754083 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(median_income)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  61914   64069   64492   64496   64920   67486 \n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(sd_income)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n9.373e+05 3.391e+06 5.787e+06 2.690e+07 1.229e+07 2.242e+10 \n```\n\n\n:::\n:::\n\n\n\n\n## Distribution of median income\n\nMedian income is the most likely income one can expect in this community. It is an approximation of geometric mean of all the possible incomes.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Density plot of median income\nplot(density(median_income), main = \"Density Plot of Median income\", xlab = \"Median income\")\n```\n\n::: {.cell-output-display}\n![](montecarlo_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n## Visualisation of the paths\n\n``` default\n# Generate colors for the paths\ncolors <- rainbow(num_simulations)\n\n# Plot the first simulated path with the first color\nplot(1:n, simulation_results[1, ], type = \"l\", ylim = c(min(simulation_results), max(simulation_results)),\n     xlab = \"Individual\", ylab = \"Income\", main = \"Simulated Paths of Income\", col = colors[1], lwd = 2)\n\n# Add the rest of the simulated paths with different colors\n\nfor (i in 2:num_simulations) {\n  lines(1:n, simulation_results[i, ], col = colors[i], lwd = 2)\n```\n\n![](images/clipboard-1360920300.png)\n\n## Interpretation\n\n-   **Mean income**:\n    -   The minimum mean income observed across simulations is ‚Çπ210,665.\n    -   The first quartile (25th percentile) of mean income is ‚Çπ296,141, indicating that 25% of simulations have mean income below this value.\n    -   The median mean income is ‚Çπ342,900, which represents the middle value of the distribution.\n    -   The mean mean income across all simulations is ‚Çπ585,468.\n    -   The third quartile (75th percentile) of mean income is ‚Çπ437,320, indicating that 75% of simulations have mean income below this value.\n    -   The maximum mean income observed is ‚Çπ372,658,431.\n-   **Median income**:\n    -   The minimum median income observed across simulations is ‚Çπ62,016.\n    -   The first quartile (25th percentile) of median income is ‚Çπ64,076, indicating that 25% of simulations have median income below this value.\n    -   The median median income is ‚Çπ64,504, which represents the middle value of the distribution.\n    -   The mean median income across all simulations is ‚Çπ64,513.\n    -   The third quartile (75th percentile) of median income is ‚Çπ64,941, indicating that 75% of simulations have median income below this value.\n    -   The maximum median income observed is ‚Çπ66,950.\n-   **Standard Deviation of income**:\n    -   The minimum standard deviation of income observed across simulations is ‚Çπ883,000.\n\n    -   The first quartile (25th percentile) of standard deviation of income is ‚Çπ3,341,000, indicating that 25% of simulations have standard deviation of income below this value.\n\n    -   The median standard deviation of income is ‚Çπ5,665,000, which represents the middle value of the distribution.\n\n    -   The mean standard deviation of income across all simulations is ‚Çπ29,140,000.\n\n    -   The third quartile (75th percentile) of standard deviation of income is ‚Çπ11,940,000, indicating that 75% of simulations have standard deviation of income below this value.\n\n    -   The maximum standard deviation of income observed is ‚Çπ37,240,000,000.\n\n## Summary\n\nWhile the marginal worker is earning ‚Çπ2700 per month, the minimum mean income per month for the community is 17500 per month. i.e, the lowest observed mean of the simulations. Similarly, the maximum mean income is ‚Çπ3.1Cr.\n\nMedian income is around ‚Çπ5375.\n\nThese summary statistics provide insights into the asymmetry of income distribution and variability of income across the simulated scenarios. Let's have a final look at [Income distribution](#fig-path).\n\nThe individual incomes of many, represented by the red lines, languish in the shadows of colossal giants. These titanic paths of income towering above, dwarfing the humble incomes below, paints a stark contrast between the `vital few` and `the useful many`.\n\nWe can make another important inference from this analysis:\n\n::: callout\n\nAny meaningful and organic improvement in the *xm*, that is the minimum value of *x*, (the minimum wage here) will exponentially increase the total wealth of the community.\n\n:::\n",
    "supporting": [
      "montecarlo_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}